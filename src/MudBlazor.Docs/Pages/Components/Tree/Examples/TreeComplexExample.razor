@namespace MudBlazor.Docs.Examples

@{
    RenderFragment renderSubTree(CustomTreeItem treeItem)
    {
        if (treeItem.TreeItems.Count > 0)
        {
            return
                @<MudTreeItem @bind-Activated="treeItem.IsSelected" @bind-Expanded="treeItem.IsExpanded" Icon="@treeItem.Icon"
                              Text="@treeItem.Title" EndText="@treeItem.Number" EndTextTypo="@Typo.caption">
                    <ChildContent>
                        @foreach (var child in treeItem.TreeItems)
                        {
                            @renderSubTree(child)
                        }
                    </ChildContent>
                </MudTreeItem>
            ;
        }
        else
        {
            return
                @<MudTreeItem @bind-Activated="treeItem.IsSelected" @bind-Expanded="treeItem.IsExpanded" Icon="@treeItem.Icon"
                              Text="@treeItem.Title" EndText="@treeItem.Number" EndTextTypo="@Typo.caption" />
            ;
        }
    }
}

<MudTree CanActivate="true" Style="width: 500px;">
    @foreach (var treeItem in TreeItems)
    {
        @renderSubTree(treeItem)
    }
</MudTree>

@code { 
        class CustomTreeItem
        {
            public string Title { get; set; }

            public string Icon { get; set; }

            public string Number { get; set; } = null;

            public bool IsSelected { get; set; }

            public bool IsExpanded { get; set; }

            public List<CustomTreeItem> TreeItems { get; set; } = new List<CustomTreeItem>();
        }

        List<CustomTreeItem> TreeItems { get; set; } = new List<CustomTreeItem>();

        public TreeComplexExample()
        {
            TreeItems.Add(new CustomTreeItem()
            {
                Title = "All Mail",
                Icon = Icons.Material.Email
            });
            TreeItems.Add(new CustomTreeItem()
            {
                Title = "Trash",
                Icon = Icons.Material.Delete
            });
            TreeItems.Add(new CustomTreeItem()
            {
                Title = "Categories",
                IsExpanded = true,
                Icon = Icons.Material.Label,
                TreeItems = new List<CustomTreeItem>()
            {
                new CustomTreeItem()
                {
                    Title = "Social",
                    Icon = Icons.Material.Group,
                    Number = "90"
                },
                new CustomTreeItem()
                {
                    Title = "Updates",
                    Icon = Icons.Material.Info,
                    Number = "2,294"
                },
                new CustomTreeItem()
                {
                    Title = "Forums",
                    Icon = Icons.Material.QuestionAnswer,
                    Number = "3,566"
                },
                new CustomTreeItem()
                {
                    Title = "Promotions",
                    Icon = Icons.Material.LocalOffer,
                    Number = "733"
                }
            }
        });
        TreeItems.Add(new CustomTreeItem()
        {
            Title = "History",
            Icon = Icons.Material.Label
        });
    } 
}
